(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569,727,213,434,142,858],{2601:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8960)},4086:function(e,t,n){Promise.resolve().then(n.bind(n,846))},846:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(7437),o=n(3151),s=n(9166),i=n(341),a=n(4033),c=n(2265),l=n(6535),u=n(171);function d(){let{user:e,pageLevelLoader:t,setPageLevelLoader:n,allOrdersForUser:d,setAllOrdersForUser:f}=(0,c.useContext)(s.GlobalContext),h=(0,a.useRouter)();async function m(){n(!0);let t=await (0,i.ax)(null==e?void 0:e._id);t.success?(n(!1),f(t.data),u.Am.success(t.message,{position:u.Am.POSITION.TOP_RIGHT})):(n(!1),u.Am.error(t.message,{position:u.Am.POSITION.TOP_RIGHT}))}return((0,c.useEffect)(()=>{null!==e&&m()},[e]),console.log(d),t)?(0,r.jsx)("div",{className:"w-full min-h-screen flex justify-center items-center",children:(0,r.jsx)(l.Z,{color:"#000000",loading:t,size:30,"data-testid":"loader"})}):(0,r.jsxs)("section",{children:[(0,r.jsx)("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"mt-8 mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"px-4 py-6 sm:px-8 sm:py-10",children:(0,r.jsx)("div",{className:"flow-root",children:d&&d.length?(0,r.jsx)("ul",{className:"flex flex-col gap-4",children:d.map(e=>(0,r.jsxs)("li",{className:"bg-gray-200 shadow p-5 flex flex-col space-y-3 py-6 text-left",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("h1",{className:"font-bold text-lg mb-3 flex-1",children:["#order: ",e._id]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("p",{className:"mr-3 text-sm font-medium text-gray-900",children:"Total paid amount"}),(0,r.jsxs)("p",{className:"mr-3 text-2xl  font-semibold text-gray-900",children:["$",e.totalPrice]})]})]}),(0,r.jsx)("div",{className:"flex gap-2",children:e.orderItems.map((e,t)=>(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)("img",{alt:"Order Item",className:"h-24 w-24 max-w-full rounded-lg object-cover",src:e&&e.product&&e.product.imageUrl})},t))}),(0,r.jsxs)("div",{className:"flex gap-5",children:[(0,r.jsx)("button",{className:"disabled:opacity-50 mt-5 mr-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:e.isProcessing?"Order is Processing":"Order is delivered"}),(0,r.jsx)("button",{onClick:()=>h.push("/orders/".concat(e._id)),className:" mt-5 mr-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:"View Order Details"})]})]},e._id))}):null})})})})}),(0,r.jsx)(o.Z,{})]})}},3151:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437),o=n(171);function s(){return(0,r.jsx)(o.Ix,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",rtl:!1})}n(8062)},9166:function(e,t,n){"use strict";n.r(t),n.d(t,{GlobalContext:function(){return a},default:function(){return d},initialCheckoutFormData:function(){return c}});var r=n(7437),o=n(1490),s=n(4033),i=n(2265);let a=(0,i.createContext)(null),c={shippingAddress:{},paymentMethod:"",totalPrice:0,isPaid:!1,paidAt:new Date,isProcessing:!0},l=["cart","checkout","account","orders","admin-view"],u=["/admin-view","/admin-view/add-product","/admin-view/all-products"];function d(e){let{children:t}=e,[n,d]=(0,i.useState)(!1),[f,h]=(0,i.useState)(!0),[m,p]=(0,i.useState)({loading:!1,id:""}),[x,g]=(0,i.useState)(null),[v,y]=(0,i.useState)(null),[w,j]=(0,i.useState)(null),[T,b]=(0,i.useState)(!1),[N,k]=(0,i.useState)([]),[O,S]=(0,i.useState)([]),[P,E]=(0,i.useState)({fullName:"",city:"",country:"",postalCode:"",address:""}),[_,A]=(0,i.useState)(c),[C,I]=(0,i.useState)([]),[Z,B]=(0,i.useState)(null),[L,z]=(0,i.useState)([]),G=(0,s.useRouter)(),R=(0,s.usePathname)();return(0,i.useEffect)(()=>{if(void 0!==o.Z.get("token")){g(!0);let e=JSON.parse(localStorage.getItem("user"))||{},t=JSON.parse(localStorage.getItem("cartItems"))||[];y(e),k(t)}else g(!1),y({})},[o.Z]),(0,i.useEffect)(()=>{"/register"!==R&&!R.includes("product")&&"/"!==R&&v&&0===Object.keys(v).length&&l.includes(R)>-1&&G.push("/login")},[v,R]),(0,i.useEffect)(()=>{null!==v&&v&&Object.keys(v).length>0&&(null==v?void 0:v.role)!=="admin"&&u.indexOf(R)>-1&&G.push("/unauthorized-page")},[v,R]),(0,r.jsx)(a.Provider,{value:{showNavmodel:n,setShowNavmodel:d,pageLevelLoader:f,setPageLevelLoader:h,isAuthUser:x,setIsAuthUser:g,user:v,setUser:y,componentLevelLoader:m,setComponentLevelLoader:p,currentUpdatedProduct:w,setCurrentUpdatedProduct:j,showCartModel:T,setShowCartModel:b,cartItems:N,setCartItems:k,addresses:O,setAddresses:S,addressFormData:P,setAddressFormData:E,checkoutFormData:_,setCheckoutFormData:A,allOrdersForUser:C,setAllOrdersForUser:I,orderDetails:Z,setOrderDetails:B,allOrdersForAllUsers:L,setAllOrdersForAllUsers:z},children:t})}},341:function(e,t,n){"use strict";n.d(t,{Bi:function(){return l},ax:function(){return i},mg:function(){return s},s$:function(){return a},wr:function(){return u}});var r=n(1490),o=n(2601);let s=async e=>{try{let t=await fetch("/api/order/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.Z.get("token"))},body:JSON.stringify(e)});return await t.json()}catch(e){console.log(e)}},i=async e=>{try{let t=await fetch("/api/order/get-all-orders?id=".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(r.Z.get("token"))}});return await t.json()}catch(e){console.log(e)}},a=async e=>{try{let t=await fetch("/api/order/order-details?id=".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(r.Z.get("token"))}});return await t.json()}catch(e){console.log(e)}},c=o.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",l=async()=>{try{let e=await fetch("".concat(c,"/api/admin/orders/get-all-orders"),{method:"GET",headers:{Authorization:"Bearer ".concat(r.Z.get("token"))}});return await e.json()}catch(e){console.log(" еее ама неска пих"),console.log(e)}},u=async e=>{try{let t=await fetch("".concat(c,"/api/admin/orders/update-order"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.Z.get("token"))},body:JSON.stringify(e)});return await t.json()}catch(e){console.log(e)}}},8062:function(){},8960:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c=[],l=!1,u=-1;function d(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={exports:{}},i=!0;try{t[e](s,s.exports,r),i=!1}finally{i&&delete n[e]}return s.exports}r.ab="//";var o=r(229);e.exports=o}()}},function(e){e.O(0,[788,971,938,744],function(){return e(e.s=4086)}),_N_E=e.O()}]);