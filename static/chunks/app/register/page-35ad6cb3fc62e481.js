(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11,727,213,434,142,858],{576:function(e,t,l){Promise.resolve().then(l.bind(l,6422))},6422:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return b}});var n=l(7437),i=l(9893),a=l(4011),o=l(2329),r=l(3151),s=l(9166);let c=async e=>{try{let t=await fetch("/api/register",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(e){console.log("error",e)}};var p=l(7121),u=l(4033),d=l(2265),m=l(171);let f={name:"",email:"",password:"",role:"customer"};function b(){let[e,t]=(0,d.useState)(f),[l,b]=(0,d.useState)(!1),{pageLevelLoader:h,setPageLevelLoader:y,isAuthUser:g}=(0,d.useContext)(s.GlobalContext),x=(0,u.useRouter)();function w(){return!!e&&!!e.name&&""!==e.name.trim()&&!!e.email&&""!==e.email.trim()&&!!e.password&&""!==e.password.trim()}async function v(){y(!0);let l=await c(e);l.success?(m.Am.success(l.message,{position:m.Am.POSITION.TOP_RIGHT}),b(!0)):m.Am.error(l.message,{position:m.Am.POSITION.TOP_RIGHT}),y(!1),t(f),console.log(l)}return console.log(e),console.log(w()),(0,d.useEffect)(()=>{g&&x.push("/")},[g]),(0,n.jsxs)("div",{className:"bg-white relative",children:[(0,n.jsx)("div",{className:"flex flex-col items-center justify-between pt-0 pr-10 pb-0 pl-10 mt-8 mr-auto xl:px-5 lg:flex-row",children:(0,n.jsx)("div",{className:"flex flex-col justify-center items-center w-full pr-10 pl-10 lg:flex-row",children:(0,n.jsx)("div",{className:"w-full mt-10 mr-0 mb-0 ml-0 relative max-w-2xl lg:mt-0 lg:w-5/12",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-start pt-10 pr-10 pb-10 pl-10 bg-white shadow-2xl rounded-xl relative z-10",children:[(0,n.jsx)("p",{className:"w-full text-4xl font-medium text-center font-serif",children:l?"Регистрацията е успешна!":"Регистрация"}),l?(0,n.jsx)("button",{className:"inline-flex w-full items-center justify-center bg-black px-6 py-4 text-lg  text-white transition-all duration-200 ease-in-out focus:shadow font-medium uppercase tracking-wide ",onClick:()=>x.push("/login"),children:"Вход"}):(0,n.jsxs)("div",{className:"w-full mt-6 mr-0 mb-0 ml-0 relative space-y-8",children:[p.Hp.map(l=>"input"===l.componentType?(0,n.jsx)(i.Z,{type:l.type,placeholder:l.placeholder,label:l.label,onChange:n=>{t({...e,[l.id]:n.target.value})},value:e[l.id]}):"select"===l.componentType?(0,n.jsx)(a.Z,{options:l.options,label:l.label,onChange:n=>{t({...e,[l.id]:n.target.value})},value:e[l.id]}):null),(0,n.jsx)("button",{className:" disabled:opacity-50 inline-flex w-full items-center justify-center bg-black px-6 py-4 text-lg  text-white transition-all duration-200 ease-in-out focus:shadow font-medium uppercase tracking-wide ",disabled:!w(),onClick:v,children:h?"Регистриране":(0,n.jsx)(o.Z,{text:"Регистриране",color:"#ffffff",loading:h})})]})]})})})}),(0,n.jsx)(r.Z,{})]})}},9893:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var n=l(7437);function i(e){let{label:t,placeholder:l,onChange:i,value:a,type:o}=e;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("p",{className:" pt-0 pr-2 pb-0 pl-2 absolute -mt-3 mr-0 mb-0 ml-2 font-medium text-gray-600 bg-white",children:t}),(0,n.jsx)("input",{placeholder:l,type:o||"text",value:a,onChange:i,className:"border placeholder-gray-400 focus:outline-none focus:border-black w-full pt-4 pr-4 pb-4 pl-4 mr-0 mt-0 ml-0 text-base block bg-white border-gray-300 rounded-md"})]})}},4011:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var n=l(7437);function i(e){let{label:t,value:l,onChange:i,options:a=[]}=e;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("p",{className:" pt-0 pr-2 absolute pb-0 pl-2 -mt-3 mr-0 mb-0 ml-2 font-medium text-gray-600 bg-white",children:t}),(0,n.jsx)("select",{value:l,onChange:i,className:"border placeholder-gray-400 focus:outline-none focus:border-black w-full pt-4 pr-4 pb-4 pl-4 mr-0 mt-0 ml-0 text-base block bg-white border-gray-300 rounded-md",children:a&&a.length?a.map(e=>(0,n.jsx)("option",{id:e.id,value:e.id,children:e.label},e.id)):(0,n.jsx)("option",{id:"",value:"",children:"Избери"})})]})}},2329:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});var n=l(7437),i=l(6535);function a(e){let{text:t,color:l,loading:a,size:o}=e;return(0,n.jsxs)("span",{className:"flex gap-1 items-center",children:[t,(0,n.jsx)(i.Z,{color:l,loading:a,size:o||10,"data-testid":"loader"})]})}},3151:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});var n=l(7437),i=l(171);function a(){return(0,n.jsx)(i.Ix,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",rtl:!1})}l(8062)},9166:function(e,t,l){"use strict";l.r(t),l.d(t,{GlobalContext:function(){return r},default:function(){return u},initialCheckoutFormData:function(){return s}});var n=l(7437),i=l(1490),a=l(4033),o=l(2265);let r=(0,o.createContext)(null),s={shippingAddress:{},paymentMethod:"",totalPrice:0,isPaid:!1,paidAt:new Date,isProcessing:!0},c=["cart","checkout","account","orders","admin-view"],p=["/admin-view","/admin-view/add-product","/admin-view/all-products"];function u(e){let{children:t}=e,[l,u]=(0,o.useState)(!1),[d,m]=(0,o.useState)(!0),[f,b]=(0,o.useState)({loading:!1,id:""}),[h,y]=(0,o.useState)(null),[g,x]=(0,o.useState)(null),[w,v]=(0,o.useState)(null),[j,T]=(0,o.useState)(!1),[S,k]=(0,o.useState)([]),[N,O]=(0,o.useState)([]),[C,I]=(0,o.useState)({fullName:"",city:"",country:"",postalCode:"",address:""}),[P,Z]=(0,o.useState)(s),[E,A]=(0,o.useState)([]),[_,G]=(0,o.useState)(null),[H,R]=(0,o.useState)([]),D=(0,a.useRouter)(),J=(0,a.usePathname)();return(0,o.useEffect)(()=>{if(void 0!==i.Z.get("token")){y(!0);let e=JSON.parse(localStorage.getItem("user"))||{},t=JSON.parse(localStorage.getItem("cartItems"))||[];x(e),k(t)}else y(!1),x({})},[i.Z]),(0,o.useEffect)(()=>{"/register"!==J&&!J.includes("product")&&"/"!==J&&g&&0===Object.keys(g).length&&c.includes(J)>-1&&D.push("/login")},[g,J]),(0,o.useEffect)(()=>{null!==g&&g&&Object.keys(g).length>0&&(null==g?void 0:g.role)!=="admin"&&p.indexOf(J)>-1&&D.push("/unauthorized-page")},[g,J]),(0,n.jsx)(r.Provider,{value:{showNavmodel:l,setShowNavmodel:u,pageLevelLoader:d,setPageLevelLoader:m,isAuthUser:h,setIsAuthUser:y,user:g,setUser:x,componentLevelLoader:f,setComponentLevelLoader:b,currentUpdatedProduct:w,setCurrentUpdatedProduct:v,showCartModel:j,setShowCartModel:T,cartItems:S,setCartItems:k,addresses:N,setAddresses:O,addressFormData:C,setAddressFormData:I,checkoutFormData:P,setCheckoutFormData:Z,allOrdersForUser:E,setAllOrdersForUser:A,orderDetails:_,setOrderDetails:G,allOrdersForAllUsers:H,setAllOrdersForAllUsers:R},children:t})}},7121:function(e,t,l){"use strict";l.d(t,{GP:function(){return c},GU:function(){return i},Hp:function(){return a},d2:function(){return r},jJ:function(){return s},mO:function(){return u},p8:function(){return n},qe:function(){return p},vV:function(){return o}}),l(994),l(9584);let n=[{id:"home",label:"Home",path:"/"},{id:"listing",label:"Всички продукти",path:"/product/listing/all-products"},{id:"listingMen",label:"Мъже",path:"/product/listing/men"},{id:"listingWomen",label:"Жени",path:"/product/listing/women"},{id:"listingKids",label:"Деца",path:"/product/listing/kids"}],i=[{id:"adminListing",label:"Обновяване на продукт",path:"/admin-view/all-products"},{id:"adminNewProduct",label:"Добавяне на продукти",path:"/admin-view/add-product"},{id:"orders",label:"Поръчки",path:"/admin-view/orders"}],a=[{id:"name",type:"text",placeholder:"Въведете вашето име",label:"Име",componentType:"input"},{id:"email",type:"email",placeholder:"Въведете email адрес",label:"Email адрес",componentType:"input"},{id:"password",type:"password",placeholder:"Въведете парола",label:"Парола",componentType:"input"},{id:"role",type:"",placeholder:"",label:"Role",componentType:"select",options:[{id:"admin",label:"Admin"},{id:"customer",label:"customer"}]}],o=[{id:"email",type:"email",placeholder:"Въведете email адрес",label:"Email",componentType:"input"},{id:"password",type:"password",placeholder:"Въведете парола",label:"Парола",componentType:"input"}],r=[{id:"name",type:"text",placeholder:"Enter name",label:"Име",componentType:"input"},{id:"price",type:"number",placeholder:"Въведете цена",label:"Цена",componentType:"input"},{id:"description",type:"text",placeholder:"Въведете описание",label:"Описание",componentType:"input"},{id:"category",type:"",placeholder:"",label:"Категория",componentType:"select",options:[{id:"men",label:"Мъже"},{id:"women",label:"Жени"},{id:"kids",label:"Деца"}]},{id:"deliveryInfo",type:"text",placeholder:"Въведете адрес",label:"Адрес",componentType:"input"},{id:"onSale",type:"",placeholder:"",label:"Промоция",componentType:"select",options:[{id:"yes",label:"Да"},{id:"no",label:"Не"}]},{id:"priceDrop",type:"number",placeholder:"Въведете намалението в %",label:"Намаление",componentType:"input"}],s=[{id:"s",label:"S"},{id:"m",label:"M"},{id:"l",label:"L"}],c=[{id:"fullName",type:"input",placeholder:"Въведете вашите имена",label:"Три имена",componentType:"input"},{id:"address",type:"input",placeholder:"Въведете адрес",label:"Адрес",componentType:"input"},{id:"city",type:"input",placeholder:"Въведете град",label:"Град",componentType:"input"},{id:"country",type:"input",placeholder:"Въведете държава",label:"Държава",componentType:"input"},{id:"postalCode",type:"input",placeholder:"Въведете пощенски код",label:"Пощенски код",componentType:"input"}],p={apiKey:"AIzaSyD5Alvae8H3a2To1DRjvweJVUuUwYTiF9I",authDomain:"modernik.firebaseapp.com",projectId:"modernik",storageBucket:"modernik.appspot.com",messagingSenderId:"626955762261",appId:"1:626955762261:web:02f40e7c046a9e779372dc",measurementId:"G-BZL21K1RQM"},u="gs://modernik.appspot.com"},8062:function(){}},function(e){e.O(0,[788,226,971,938,744],function(){return e(e.s=576)}),_N_E=e.O()}]);