(()=>{var e={};e.id=8025,e.ids=[8025],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},99612:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(50482),a=s(69108),i=s(62563),o=s.n(i),n=s(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c=["",{children:["admin-view",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,22743)),"D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\admin-view\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,89374)),"D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\admin-view\\page.js"],m="/admin-view/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin-view/page",pathname:"/admin-view",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},89954:(e,t,s)=>{Promise.resolve().then(s.bind(s,57548))},57548:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(95344),a=s(97027),i=s(46859),o=s(96211),n=s(3729),l=s(7732);function c(){let{allOrdersForAllUsers:e,setAllOrdersForAllUsers:t,user:s,pageLevelLoader:c,setPageLevelLoader:d,componentLevelLoader:m,setComponentLevelLoader:p}=(0,n.useContext)(i.GlobalContext);async function x(){d(!0);let e=await (0,o.Bi)();console.log(e),e.success?(d(!1),t(e.data&&e.data.length?e.data.filter(e=>e.user._id!==s._id):[])):d(!1)}async function u(e){p({loading:!0,id:e._id}),(await (0,o.wr)({...e,isProcessing:!1})).success?(p({loading:!1,id:""}),x()):p({loading:!0,id:""})}return((0,n.useEffect)(()=>{null!==s&&x()},[s]),console.log(e),c)?r.jsx("div",{className:"w-full min-h-screen flex justify-center items-center",children:r.jsx(l.Z,{color:"#000000",loading:c,size:30,"data-testid":"loader"})}):r.jsx("section",{children:r.jsx("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{children:r.jsx("div",{className:"px-4 py-6 sm:px-8 sm:py-10",children:r.jsx("div",{className:"flow-root",children:e&&e.length?r.jsx("ul",{className:"flex flex-col gap-4",children:e.map(e=>(0,r.jsxs)("li",{className:"bg-gray-200 shadow p-5 flex flex-col space-y-3 py-6 text-left",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("h1",{className:"font-bold text-lg mb-3 flex-1",children:["Поръчка номер: ",e._id]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("p",{className:"mr-3 text-sm font-medium text-gray-900",children:"Потребиител :"}),r.jsx("p",{className:"text-sm  font-semibold text-gray-900",children:e?.user?.name})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("p",{className:"mr-3 text-sm font-medium text-gray-900",children:"Потребителски email :"}),r.jsx("p",{className:"text-sm  font-semibold text-gray-900",children:e?.user?.email})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("p",{className:"mr-3 text-sm font-medium text-gray-900",children:"Заплатена сума. :"}),(0,r.jsxs)("p",{className:"text-sm  font-semibold text-gray-900",children:["$",e?.totalPrice]})]})]})]}),r.jsx("div",{className:"flex gap-2",children:e.orderItems.map((e,t)=>r.jsx("div",{className:"shrink-0",children:r.jsx("img",{alt:"Order Item",className:"h-24 w-24 max-w-full rounded-lg object-cover",src:e&&e.product&&e.product.imageUrl})},t))}),(0,r.jsxs)("div",{className:"flex gap-5",children:[r.jsx("button",{className:"disabled:opacity-50 mt-5 mr-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:e.isProcessing?"Поръчката се обработва":"Поръчката е доставена"}),r.jsx("button",{onClick:()=>u(e),disabled:!e.isProcessing,className:"disabled:opacity-50 mt-5 mr-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:m&&m.loading&&m.id===e._id?r.jsx(a.Z,{text:"Обновяване на поръчката",color:"#ffffff",loading:m&&m.loading}):"Актуализиране на поръчката"})]})]},e._id))}):null})})})})})}},96211:(e,t,s)=>{"use strict";s.d(t,{Bi:()=>l,ax:()=>i,mg:()=>a,s$:()=>o,wr:()=>c});var r=s(8014);let a=async e=>{try{let t=await fetch("/api/order/create-order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.Z.get("token")}`},body:JSON.stringify(e)});return await t.json()}catch(e){console.log(e)}},i=async e=>{try{let t=await fetch(`/api/order/get-all-orders?id=${e}`,{method:"GET",headers:{Authorization:`Bearer ${r.Z.get("token")}`}});return await t.json()}catch(e){console.log(e)}},o=async e=>{try{let t=await fetch(`/api/order/order-details?id=${e}`,{method:"GET",headers:{Authorization:`Bearer ${r.Z.get("token")}`}});return await t.json()}catch(e){console.log(e)}},n=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",l=async()=>{try{let e=await fetch(`${n}/api/admin/orders/get-all-orders`,{method:"GET",headers:{Authorization:`Bearer ${r.Z.get("token")}`}});return await e.json()}catch(e){console.log(" еее ама неска пих"),console.log(e)}},c=async e=>{try{let t=await fetch(`${n}/api/admin/orders/update-order`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.Z.get("token")}`},body:JSON.stringify(e)});return await t.json()}catch(e){console.log(e)}}},22743:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>o});let r=(0,s(86843).createProxy)(String.raw`D:\Programming\E-commerce App w NextJS\ecommerce - Copy\src\app\admin-view\page.js`),{__esModule:a,$$typeof:i}=r,o=r.default},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(70337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,5872,337,5075],()=>s(99612));module.exports=r})();