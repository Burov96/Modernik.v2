(()=>{var e={};e.id=1565,e.ids=[1565],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},58373:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>c.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o});var r=s(50482),a=s(69108),i=s(62563),c=s.n(i),n=s(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let o=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23583)),"D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\cart\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,89374)),"D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\cart\\page.js"],m="/cart/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},21320:(e,t,s)=>{Promise.resolve().then(s.bind(s,43714))},43714:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(95344),a=s(22254),i=s(97027);function c({cartItems:e=[],handleDeleteCartItem:t,componentLevelLoader:s}){let c=(0,a.useRouter)();return r.jsx("section",{className:"h-screen bg-gray-100",children:r.jsx("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"mx-auto mt-8 max-w-screen-xl px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-8 sm:py-10",children:[r.jsx("div",{className:"flow-root",children:e&&e.length?r.jsx("ul",{className:"-my-8",children:e.map(e=>(0,r.jsxs)("li",{className:"flex-col flex space-y-3 py-6 text-left sm:flex-row sm:space-x-5 sm:space-y-0",children:[r.jsx("div",{className:"shrink-0",children:r.jsx("img",{src:e&&e.productID&&e.productID.imageUrl,alt:"Product image",className:"h-24 w-25 max-w-full rounded-lg object-cover"})}),r.jsx("div",{className:"flex flex-1 flex-col justify-between",children:(0,r.jsxs)("div",{className:"sm:col-gap-5 sm:grid sm:grid-cols-2",children:[r.jsx("div",{className:"pr-8 sm:pr-4",children:r.jsx("p",{className:"text-base font-semibold text-gray-900",children:e&&e.productID&&e.productID.name})}),(0,r.jsxs)("div",{className:"mt-4 flex gap-3 items-end justify-between sm:mt-0 sm:items-start sm:justify-end",children:[(0,r.jsxs)("p",{className:"shrink-0 w-20 text-base font-semibold text-gray-950 sm:order-1 sm:ml-8 sm:text-right",children:["$",e&&e.productID&&e.productID.price]}),r.jsx("button",{type:"button",className:"font-medium text-yellow-700 sm:order-2",onClick:()=>t(e._id),children:s&&s.loading&&s.id===e._id?r.jsx(i.Z,{text:"Премахване",color:"#0000000",loading:s&&s.loading}):"Премахни"})]})]})})]},e.id))}):r.jsx("h1",{className:"font-bold text-lg",children:"Количката е празна"})}),(0,r.jsxs)("div",{className:"mt-6 border-t border-b py-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Междинна сума"}),(0,r.jsxs)("p",{className:"text-lg text-black font-semibold",children:["$",e&&e.length?e.reduce((e,t)=>t.productID.price+e,0):"0"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Доставка"}),r.jsx("p",{className:"text-lg text-black font-semibold",children:"$0"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Обща сума"}),(0,r.jsxs)("p",{className:"text-lg text-black font-semibold",children:["$",e&&e.length?e.reduce((e,t)=>t.productID.price+e,0):"0"]})]}),r.jsx("div",{className:"mt-5 text-center",children:r.jsx("button",{onClick:()=>c.push("/checkout"),disabled:e&&0===e.length,className:"disabled:opacity-50 group inline-flex w-full items-center justify-center bg-black px-6 py-4 text-lg text-white font-medium uppercase tracking-wide",children:"Плащане"})})]})]})})})})})}var n=s(46859),l=s(87716),o=s(3729),d=s(7732),m=s(1208);function p(){let{user:e,setCartItems:t,cartItems:s,pageLevelLoader:a,setPageLevelLoader:i,setComponentLevelLoader:p,componentLevelLoader:x}=(0,o.useContext)(n.GlobalContext);async function u(){i(!0);let s=await (0,l.tQ)(e?._id);if(s.success){let e=s.data&&s.data.length?s.data.map(e=>({...e,productID:{...e.productID,price:"yes"===e.productID.onSale?parseInt((e.productID.price-e.productID.price*(e.productID.priceDrop/100)).toFixed(2)):e.productID.price}})):[];t(e),i(!1),localStorage.setItem("cartItems",JSON.stringify(e))}console.log(s)}async function g(e){p({loading:!0,id:e});let t=await (0,l.EI)(e);t.success?(p({loading:!1,id:""}),m.Am.success(t.message,{position:m.Am.POSITION.TOP_RIGHT}),u()):(m.Am.error(t.message,{position:m.Am.POSITION.TOP_RIGHT}),p({loading:!1,id:e}))}return((0,o.useEffect)(()=>{null!==e&&u()},[e]),a)?r.jsx("div",{className:"w-full min-h-screen flex justify-center items-center",children:r.jsx(d.Z,{color:"#000000",loading:a,size:30,"data-testid":"loader"})}):r.jsx(c,{componentLevelLoader:x,handleDeleteCartItem:g,cartItems:s})}},23583:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>c});let r=(0,s(86843).createProxy)(String.raw`D:\Programming\E-commerce App w NextJS\ecommerce - Copy\src\app\cart\page.js`),{__esModule:a,$$typeof:i}=r,c=r.default},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(70337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,5872,337,5075],()=>s(58373));module.exports=r})();