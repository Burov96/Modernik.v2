(()=>{var e={};e.id=9346,e.ids=[9346],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},24878:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c});var a=s(50482),r=s(69108),i=s(62563),o=s.n(i),n=s(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c=["",{children:["account",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,44438)),"D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\account\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,89374)),"D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\account\\page.js"],p="/account/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/account/page",pathname:"/account",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},25165:(e,t,s)=>{Promise.resolve().then(s.bind(s,61828))},61828:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(95344),r=s(54433),i=s(97027),o=s(79510),n=s(46859),l=s(66412),c=s(78379),d=s(22254),p=s(3729),u=s(7732),m=s(1208);function x(){let{user:e,addresses:t,setAddresses:s,addressFormData:x,setAddressFormData:g,componentLevelLoader:h,setComponentLevelLoader:f,pageLevelLoader:y,setPageLevelLoader:b}=(0,p.useContext)(n.GlobalContext),[j,w]=(0,p.useState)(!1),[N,v]=(0,p.useState)(null),P=(0,d.useRouter)();async function k(){b(!0);let t=await (0,l.ar)(e?._id);t.success&&(b(!1),s(t.data))}async function _(){f({loading:!0,id:""});let t=null!==N?await (0,l.y3)({...x,_id:N}):await (0,l.AF)({...x,userID:e?._id});console.log(t),t.success?(f({loading:!1,id:""}),m.Am.success(t.message,{position:m.Am.POSITION.TOP_RIGHT}),g({fullName:"",city:"",country:"",postalCode:"",address:""}),k(),v(null)):(f({loading:!1,id:""}),m.Am.error(t.message,{position:m.Am.POSITION.TOP_RIGHT}),g({fullName:"",city:"",country:"",postalCode:"",address:""}))}async function C(e){f({loading:!0,id:e});let t=await (0,l._N)(e);t.success?(f({loading:!1,id:""}),m.Am.success(t.message,{position:m.Am.POSITION.TOP_RIGHT}),k()):(f({loading:!1,id:""}),m.Am.error(t.message,{position:m.Am.POSITION.TOP_RIGHT}))}return(0,p.useEffect)(()=>{null!==e&&k()},[e]),(0,a.jsxs)("section",{children:[a.jsx("div",{className:"mx-auto bg-gray-100 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"bg-white shadow",children:(0,a.jsxs)("div",{className:"p-6 sm:p-12",children:[a.jsx("div",{className:"flex flex-col space-y-4 md:space-y-0 md:space-x-6 md:flex-row"}),(0,a.jsxs)("div",{className:"flex flex-col flex-1",children:[a.jsx("h4",{className:"text-lg font-semibold text-center md:text-left",children:e?.name}),a.jsx("p",{children:e?.email}),a.jsx("p",{children:e?.role})]}),a.jsx("button",{onClick:()=>P.push("/orders"),className:"mt-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:"Вашите поръчки"}),(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("h1",{className:"font-bold text-lg",children:"Вашите адреси:"}),y?a.jsx(u.Z,{color:"#000000",loading:y,size:15,"data-testid":"loader"}):a.jsx("div",{className:"mt-4 flex flex-col gap-4",children:t&&t.length?t.map(e=>(0,a.jsxs)("div",{className:"border p-6",children:[(0,a.jsxs)("p",{children:["Име : ",e.fullName]}),(0,a.jsxs)("p",{children:["Адрес : ",e.address]}),(0,a.jsxs)("p",{children:["Град : ",e.city]}),(0,a.jsxs)("p",{children:["Държава : ",e.country]}),(0,a.jsxs)("p",{children:["Пощенски код : ",e.postalCode]}),a.jsx("button",{onClick:()=>{w(!0),g({fullName:e.fullName,city:e.city,country:e.country,postalCode:e.postalCode,address:e.address}),v(e._id)},className:"mt-5 mr-5 inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:"Обнови"}),a.jsx("button",{onClick:()=>C(e._id),className:"mt-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:h&&h.loading&&h.id===e._id?a.jsx(i.Z,{text:"Изтриване",color:"#ffffff",loading:h&&h.loading}):"Изтрий"})]},e._id)):a.jsx("p",{children:"Все още нямате добавен адрес."})})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:()=>w(!j),className:"mt-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:j?"Скрий полето за адреси":"Добавяне на нов адрес"})}),j?(0,a.jsxs)("div",{className:"flex flex-col mt-5 justify-center pt-4 items-center",children:[a.jsx("div",{className:"w-full mt-6 mr-0 mb-0 ml-0 space-y-8",children:c.GP.map(e=>a.jsx(r.Z,{type:e.type,placeholder:e.placeholder,label:e.label,value:x[e.id],onChange:t=>g({...x,[e.id]:t.target.value})}))}),a.jsx("button",{onClick:_,className:"mt-5  inline-block bg-black text-white px-5 py-3 text-xs font-medium uppercase tracking-wide",children:h&&h.loading?a.jsx(i.Z,{text:"Запазване",color:"#ffffff",loading:h&&h.loading}):"Запази"})]}):null]})})}),a.jsx(o.Z,{})]})}},54433:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(95344);function r({label:e,placeholder:t,onChange:s,value:r,type:i}){return(0,a.jsxs)("div",{className:"relative",children:[a.jsx("p",{className:" pt-0 pr-2 pb-0 pl-2 absolute -mt-3 mr-0 mb-0 ml-2 font-medium text-gray-600 bg-white",children:e}),a.jsx("input",{placeholder:t,type:i||"text",value:r,onChange:s,className:"border placeholder-gray-400 focus:outline-none focus:border-black w-full pt-4 pr-4 pb-4 pl-4 mr-0 mt-0 ml-0 text-base block bg-white border-gray-300 rounded-md"})]})}},79510:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(95344),r=s(1208);function i(){return a.jsx(r.Ix,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",rtl:!1})}s(45996)},66412:(e,t,s)=>{"use strict";s.d(t,{AF:()=>r,_N:()=>n,ar:()=>i,y3:()=>o});var a=s(8014);let r=async e=>{try{let t=await fetch("/api/address/add-new-address",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.Z.get("token")}`},body:JSON.stringify(e)});return await t.json()}catch(e){console.log(e)}},i=async e=>{try{let t=await fetch(`/api/address/get-all-address?id=${e}`,{method:"GET",headers:{Authorization:`Bearer ${a.Z.get("token")}`}});return await t.json()}catch(e){console.log(e)}},o=async e=>{try{let t=await fetch("/api/address/update-address",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.Z.get("token")}`},body:JSON.stringify(e)});return await t.json()}catch(e){console.log(e)}},n=async e=>{try{let t=await fetch(`/api/address/delete-address?id=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${a.Z.get("token")}`}});return await t.json()}catch(e){console.log(e)}}},44438:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>o});let a=(0,s(86843).createProxy)(String.raw`D:\Programming\E-commerce App w NextJS\ecommerce - Copy\src\app\account\page.js`),{__esModule:r,$$typeof:i}=a,o=a.default},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(70337);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},45996:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[1638,5872,337,5075],()=>s(24878));module.exports=a})();