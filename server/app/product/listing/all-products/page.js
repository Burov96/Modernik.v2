(()=>{var e={};e.id=6213,e.ids=[6213],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},20033:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>l});var s=r(50482),o=r(69108),i=r(62563),n=r.n(i),a=r(68300),c={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>a[e]);r.d(t,c);let l=["",{children:["product",{children:["listing",{children:["all-products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,12521)),"D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\product\\listing\\all-products\\page.js"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,89374)),"D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Programming\\E-commerce App w NextJS\\ecommerce - Copy\\src\\app\\product\\listing\\all-products\\page.js"],u="/product/listing/all-products/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/product/listing/all-products/page",pathname:"/product/listing/all-products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},53144:(e,t,r)=>{Promise.resolve().then(r.bind(r,69286))},69286:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(95344),o=r(22254),i=r(97027),n=r(46859),a=r(87716),c=r(49926),l=r(3729),d=r(1208);function u({item:e}){let t=(0,o.usePathname)(),{setCurrentUpdatedProduct:r,setComponentLevelLoader:u,componentLevelLoader:p,user:m,showCartModel:x,setShowCartModel:h}=(0,l.useContext)(n.GlobalContext),g=(0,o.useRouter)();async function f(e){u({loading:!0,id:e._id});let t=await (0,c.ak)(e._id);t.success?(u({loading:!1,id:""}),d.Am.success(t.message,{position:d.Am.POSITION.TOP_RIGHT}),g.refresh()):(d.Am.error(t.message,{position:d.Am.POSITION.TOP_RIGHT}),u({loading:!1,id:""}))}async function y(e){u({loading:!0,id:e._id});let t=await (0,a.Xq)({productID:e._id,userID:m._id});t.success?d.Am.success(t.message,{position:d.Am.POSITION.TOP_RIGHT}):d.Am.error(t.message,{position:d.Am.POSITION.TOP_RIGHT}),u({loading:!1,id:""}),h(!0),console.log(t)}return t.includes("admin-view")?(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{onClick:()=>{r(e),g.push("/admin-view/add-product")},className:"mt-1.5 flex w-full justify-center bg-black px-5 py-3 text-xs font-medium uppercase tracking-wide text-white",children:"Update"}),s.jsx("button",{onClick:()=>f(e),className:"mt-1.5 flex w-full justify-center bg-black px-5 py-3 text-xs font-medium uppercase tracking-wide text-white",children:p&&p.loading&&e._id===p.id?s.jsx(i.Z,{text:"Изтриване",color:"#ffffff",loading:p&&p.loading}):"DELETE"})]}):s.jsx(s.Fragment,{children:s.jsx("button",{onClick:()=>y(e),className:"mt-1.5 flex w-full justify-center bg-black px-5 py-3 text-xs font-medium uppercase tracking-wide text-white",children:p&&p.loading&&p.id===e._id?s.jsx(i.Z,{text:"Добави в количката",color:"#ffffff",loading:p&&p.loading}):"Добави в количката"})})}function p({item:e}){let t=(0,o.useRouter)();return(0,s.jsxs)("div",{onClick:()=>t.push(`/product/${e._id}`),children:[s.jsx("div",{className:"overflow-hideen aspect-w-1 aspect-h-1 h-52",children:s.jsx("img",{src:e.imageUrl,alt:"Product image",className:"h-full w-full object-cover transition-all duration-300 group-hover:scale-125"})}),"yes"===e.onSale?s.jsx("div",{className:"absolute top-0 m-2 rounded-full bg-black",children:s.jsx("p",{className:"rounded-full  p-1 text-[8px] font-bold uppercase tracking-wide text-white sm:py-1 sm:px-3",children:"Sale"})}):null,(0,s.jsxs)("div",{className:"my-4 mx-auto flex w-10/12 flex-col items-start justify-between",children:[(0,s.jsxs)("div",{className:"mb-2 flex",children:[s.jsx("p",{className:`mr-3 text-sm font-semibold ${"yes"===e.onSale?"line-through":""}`,children:`$ ${e.price}`}),"yes"===e.onSale?s.jsx("p",{className:"mr-3 text-sm font-semibold text-red-700",children:`$ ${(e.price-e.price*(e.priceDrop/100)).toFixed(2)}`}):null,"yes"===e.onSale?s.jsx("p",{className:"mr-3 text-sm font-semibold",children:`-(${e.priceDrop}%)off`}):null]}),s.jsx("h3",{className:"md-2 text-gray-400 text-sm",children:e.name})]})]})}var m=r(79510);function x({data:e}){let t=(0,o.useRouter)();return(0,l.useEffect)(()=>{t.refresh()},[]),(0,s.jsxs)("section",{className:"bg-white py-12 sm:py-16",children:[s.jsx("div",{className:"mx-auto max-w-screen-xl px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"mt-10 grid grid-cols-2 gap-6 sm:grid-cols-4 sm:gap-4 lg:mt-16",children:e&&e.length?e.map(e=>(0,s.jsxs)("article",{className:"relative flex flex-col overflow-hidden border cursor-pointer",children:[s.jsx(p,{item:e}),s.jsx(u,{item:e})]},e._id)):null})}),s.jsx(m.Z,{})]})}},79510:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(95344),o=r(1208);function i(){return s.jsx(o.Ix,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",rtl:!1})}r(45996)},49926:(e,t,r)=>{"use strict";r.d(t,{Tw:()=>a,ak:()=>c,c0:()=>n,xg:()=>o});var s=r(8014);let o=async e=>{try{let t=await fetch("/api/admin/add-product",{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${s.Z.get("token")}`},body:JSON.stringify(e)});return await t.json()}catch(e){console.log(e)}},i=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",n=async()=>{try{let e=await fetch(`${i}/api/admin/all-products`,{method:"GET",cache:"no-store"});return await e.json()}catch(e){console.log(e)}},a=async e=>{try{let t=await fetch("/api/admin/update-product",{method:"PUT",headers:{"content-type":"application/json",Authorization:`Bearer ${s.Z.get("token")}`},cache:"no-store",body:JSON.stringify(e)});return await t.json()}catch(e){console.log(e)}},c=async e=>{try{let t=await fetch(`/api/admin/delete-product?id=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s.Z.get("token")}`}});return await t.json()}catch(e){console.log(e)}}},12521:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(25036),o=r(88423),i=r(58774);async function n(){let e=await (0,i.c0)();return s.jsx(o.ZP,{data:e&&e.data})}},88423:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>n});let s=(0,r(86843).createProxy)(String.raw`D:\Programming\E-commerce App w NextJS\ecommerce - Copy\src\components\CommonListing\index.js`),{__esModule:o,$$typeof:i}=s,n=s.default},58774:(e,t,r)=>{"use strict";/*! js-cookie v3.0.5 | MIT */function s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)e[s]=r[s]}return e}r.d(t,{c0:()=>i,CA:()=>n,T5:()=>a}),function e(t,r){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=s({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var a in i)i[a]&&(n+="; "+a,!0!==i[a]&&(n+="="+i[a].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+n}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],s={},o=0;o<r.length;o++){var i=r[o].split("="),n=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(s[a]=t.read(n,a),e===a)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){o(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let o=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3000",i=async()=>{try{let e=await fetch(`${o}/api/admin/all-products`,{method:"GET",cache:"no-store"});return await e.json()}catch(e){console.log(e)}},n=async e=>{try{let t=await fetch(`/api/admin/product-by-category?id=${e}`,{method:"GET",cache:"no-store"});return await t.json()}catch(e){console.log(e)}},a=async e=>{try{let t=await fetch(`/api/admin/product-by-id?id=${e}`,{method:"GET",cache:"no-store"});return await t.json()}catch(e){console.log(e)}}},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(70337);let o=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},45996:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,5872,337,5075],()=>r(20033));module.exports=s})();